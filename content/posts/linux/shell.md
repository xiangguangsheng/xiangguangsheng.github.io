+++
title = "shell"
date = "2021-07-19"
description = "shell编程"
featured = false
categories = [
  "linux"
]
tags = [
  "linux", "shell"]
series = [
  "linux"
]
images = [
]

+++
# 1.shell常用快捷键

## 1.1 光标移动

``` 
* ctrl + <      移动到前一个单词开头
* ctrl + >      移动到后一个单词结尾
* ctrl + A      移动到开头
* ctrl + E      移动到结尾
* alt  + B      向左移动一个单词
* alt  + F      向右移动一个单词
  ctrl + B      向左移动一个字符
  ctrl + F      向右移动一个字符
  esc  + B      向左移动一个单词
  esc  + F      向右移动一个单词
  ctrl + XX     在上次光和当前光标所在字符间跳转
  esc  + T      交换光标位置前的两个单词
```

## 1.2 删除

```
* ctrl + K      删除光标后所有字符(剪切)
* ctrl + U      删除光标前所有字符(剪切)
* ctrl + W      删除光标前一个单词
  ctrl + D      删除光标所在字符(光标右侧)
  ctrl + H      删除光标前字符(光标左侧)
```

## 1.3 撤销

```
* ctrl + _      撤销操作
* ctrl + Y      粘贴ctrl+U/K剪切的内容
  ctrl + ?      撤消前一次输入
  alt  + R      撤消前一次动作
```

## 1.4 替换

```
* ctrl + T      将光标当前字符与前面一个字符替换
```

# 1.5 历史命令编辑

```
* ctrl + P      上条输入的命令(相当于上键)
* ctrl + N      上条历史命(相当于下键)
* alt  + >      上一次执行命令
* ctrl + R      输入单词搜索历史命令
```

## 1.6 控制命令

```
* ctrl + L      清除屏幕
  ctrl + S      锁住终端，阻止屏幕输出
  ctrl + Q      解锁终端，允许屏幕输出
  ctrl + C      终止命令&另起一行
  ctrl + I      补全功能(类似TAB)
  ctrl + O      重复执行命令
  alt  + <数字>  操作的次数
  ctrl + Z      挂起
```

## 1.7 !命令

```
* !!            执行上条命令
* !-n           执行前n条命令
```



# 2.shell 基础

## 2.1 变量

### 2.1.1 自定义变量

1. 定义变量：`变量名=变量值 （等号前后不能有空格）`
2. 引用变量：`\$变量名和\${变量名},区别：基本相同，${变量名}可以用在字符串模板中`
3. 查看变量：`echo $变量名，set 显示所有的变量，包括自定义变量和系统变量`
4. 取消变量：`unset 变量名，作用范围，当前shell中有效`

### 2.1.2 系统变量

1. 定义系统变量：`export 变量名=变量值,将自定义变量转为环境变量`
2. 引用系统变量：`\$变量名和\${变量名},区别：基本相同，${变量名}可以用在字符串模板中`
3. 查看系统变量：`echo $变量名，env显示所有系统变量`
4. 取消系统变量：`unset 变量名，作用范围，当前shell和子shell中有效`

### 2.1.3 位置参数变量

脚本参数传参`$1 $2 $3 $4 $5 $6 $7 $8 $9 ${10} `

### 2.1.3 预先定义变量

> `$0`脚本名称
>
> `$*`所有参数
>
> `$@`所有参数
>
> `$#`参数个数
>
> `$$`当前进程pid
>
> `$!`上个后台经常pid
>
> `$?`上个命令返回值，0表示成功

脚本参数传参`$1 $2 $3 $4 $5 $6 $7 $8 $9 ${10} `

```shell
#变量赋值，=号前后不能有空格
# 变量的解析，建议用$(),不建议使用`
v1=`date +%F`
v2=$(date +%F)
```

## 2.2 引号的区别

| 符号      | 含义              | 实例 |
| --------- | ----------------- | ---- |
| 单引号`'` | 所见即所得        |      |
| 双引号`"` | 会解析变量        |      |
| 反引号`   | 会执行命令同`$()` |      |

## 2.3 数字运算

1. 使用\$(()),例如$((1+2))
2. 使用\$[],例如：$[1+2]

3. expr, 例如：expr 1+2
4. let，例如：let num=1+2

## 2.4 ${}

1. ${变量名-默认变量值}，当变量没有设置值时（或者使用了`unset 变量名` ）,会显示默认变量值；当有变量值（包括空值），不会显示默认值
2. ${变量名:-默认变量值}，当变量没有设置值时（包括空值 ）,会显示默认变量值；当有变量值（不包括空值），不会显示默认值

## 2.5 命令执行

1. `命令1 ；命令2` :命令1和命令2都会执行
2.  `命令1 && 命令2` :命令1执行成功才会执行命令2
3. `命令1 || 命令2` :命令1执行失败才会执行命令2

## 2.6 条件测试

1. `test 条件表达式`
2. `[ 条件表达式 ]`
3. `[[ 条件表达式 ]]`

> `[`是个命令，所以，`[ 条件表达式 ]` 表达式前后都要有空格

## 2.7 文件测试

1. `[ -e dir|file ]`: 是否存在dir目录 或者file文件
2. `[ -d dir ]`: 是否存在dir目录 
3. `[ -f file ]`: 是否存在file文件
4. `[ -r file ]`: 是否有读权限
5. `[ -w file ]`: 是否有写权限
6. `[ -x file ]`: 是否有执行权限
7. `[ -L file ]`: 是否为链接文件



## 2.8 数值比较

1. `[ 1 -gt 10 ]`: 大于
2. `[ 1 -lt 10 ]`: 小于
3. `[ 1 -eq 10 ]`: 等于
4. `[ 1 -ne 10 ]`: 不等于
5. `[ 1 -ge 10 ]`: 大于等于
6. `[ 1 -le 10 ]`: 大于等于

## 2.9 if语句

```shell
if [ 条件语句 ];then
	echo "条件1"
elif [ 条件语句 ];then
	echo "条件1"
elif [ 条件语句 ];then
	echo "条件1"
else
	echo "条件1"
fi
```

## 2.10 case语句

```shell
case 变量 in
	值1)
	echo "1" ;;
	值2)
	echo "2" ;;
	*)
	echo "*" 
esac
```

## 2.11 for循环

```shell
for 变量 in [ 取值列表 ]
do
	echo "1" 
done
```

## 2.12  while循环

```shell
while 条件测试
do
	echo "1" 
done
```

## 2.13  shell内置命令

1. `break` 跳出当前循环
2. `continue` 执行下次循环
3. `exit` 退出整个程序

## 3.1 子shell

```shell
{ 命令 }&   #命令会在子shell中执行，可以使用wait 还等待执行完成
```

