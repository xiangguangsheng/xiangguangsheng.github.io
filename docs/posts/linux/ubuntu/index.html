<!doctype html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>shell - james的个人主页</title><link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/images/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/images/favicons/manifest.json">
<link rel="icon" href="/images/favicons/favicon.ico">
<meta name="keywords" content="" />
<meta name="description" content="shell编程" /><meta itemprop="name" content="shell">
<meta itemprop="description" content="shell编程"><meta itemprop="datePublished" content="2021-07-19T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-07-19T00:00:00+00:00" />
<meta itemprop="wordCount" content="2163">
<meta itemprop="keywords" content="linux,ubuntu," /><meta property="og:title" content="shell" />
<meta property="og:description" content="shell编程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/linux/ubuntu/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-07-19T00:00:00+00:00" />
<meta property="og:see_also" content="/posts/linux/shell/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="shell"/>
<meta name="twitter:description" content="shell编程"/>
<meta name="twitter:site" content="@yourtwitterusername"/>
<meta data-name="palette" content="blue"><link rel=stylesheet href="/css/bundle.min.ce383e7297312216c2d2ced30574d5a9ae83c451db9f064a454509955ae2462d.css" integrity="sha256-zjg&#43;cpcxIhbC0s7TBXTVqa6DxFHbnwZKRUUJlVriRi0=" crossorigin="anonymous"><script src="/js/bundle.min.ad6d83537f5b4374c837a12a76422496582e04d1dde91bbb443641ec12c506c6.js" integrity="sha256-rW2DU39bQ3TIN6EqdkIkllguBNHd6Ru7RDZB7BLFBsY=" crossorigin="anonymous"></script>
</head><body><header><nav class="navbar navbar-expand-xl fixed-top">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img class="logo" alt="Logo" src="/images/logo.webp" loading="lazy">BOOTSTRAP</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-1 mb-2 mb-lg-0"><form class="search-bar d-flex ms-1" action="/search">
  <div class="input-group input-group-sm">
    <button class="btn btn-search disabled position-absolute left-0" type="submit"><i class="fas fa-fw fa-search"></i></button>
    <input class="form-control rounded-pill" id="searchQuery" name="q" type="search" aria-label="Search">
  </div>
</form></ul><ul class="navbar-nav me-1 mb-2 mb-lg-0 me-1 ms-auto"><li class="nav-item">
          <a class="nav-link" href="/archives">
            <i class="fas fa-fw fa-file-archive"></i>归档
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/categories">
            <i class="fas fa-fw fa-folder"></i>分类
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/tags">
            <i class="fas fa-fw fa-tags"></i>标签
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/series">
            <i class="fas fa-fw fa-columns"></i>专栏
          </a>
        </li><li class="nav-item dropdown">
          <a class="nav-link" id="navbarDropdown-website" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-fw fa-chevron-circle-down"></i>在线工具
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown-website"><li>
              <a class="dropdown-item"
                href="https://cron.qqe2.com/" target="_blank">
                <i class="fab fa-fw fa-github"></i>cron表达式
              </a>
            </li><li>
              <a class="dropdown-item"
                href="http://tool.chinaz.com/dns" target="_blank">
                <i class="fab fa-fw fa-github"></i>dns查询
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://www.bejson.com/jsoneditoronline/" target="_blank">
                <i class="fab fa-fw fa-github"></i>json编辑器 
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://tableconvert.com/" target="_blank">
                <i class="fab fa-fw fa-github"></i>md表格生成
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://www.toyaml.com/index.html" target="_blank">
                <i class="fab fa-fw fa-github"></i>yaml&lt;--&gt;Properties 
              </a>
            </li><li>
              <a class="dropdown-item"
                href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank">
                <i class="fab fa-fw fa-github"></i>编码解码
              </a>
            </li></ul>
        </li><li class="nav-item">
  <a class="nav-link" data-bs-toggle="offcanvas" href="#offcanvasSettings" role="button"
    aria-controls="offcanvasSettings">
    <i class="fas fa-fw fa-sliders-h"></i> 设置
  </a>
</li>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings"
  aria-labelledby="offcanvasSettingsLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" w id="offcanvasSettingsLabel"><i class="fas fa-fw fa-sliders-h"></i> 设置</h5>
    <a role="button" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fas fa-2x fa-fw fa-times"></span>
    </a>
  </div>
  <div class="offcanvas-body"><section class="setting">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-adjust"></i> 模式</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="modeSwitcher">
      </div>
    </div>
  </form>
</section>
<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> 字体大小</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>

<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> 配色</label>
    </div>
    <div class="col-auto ms-auto">
      <span id="btnPalette" class="btn btn-sm"><i class="fas fa-eye-dropper"></i></span>
    </div>
  </form>
  <div class="container mt-2 visually-hidden" id="palettePicker">
    <div class="btn-group"><button type="button" id="palette-blue" title="蓝色" 
          class="btn btn-sm palette bg-blue d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-blue-gray" title="蓝灰色" 
          class="btn btn-sm palette bg-blue-gray d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-brown" title="棕色" 
          class="btn btn-sm palette bg-brown d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-cyan" title="青色" 
          class="btn btn-sm palette bg-cyan d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-green" title="绿色" 
          class="btn btn-sm palette bg-green d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-indigo" title="靛青色" 
          class="btn btn-sm palette bg-indigo d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-orange" title="橙色" 
          class="btn btn-sm palette bg-orange d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-pink" title="粉色" 
          class="btn btn-sm palette bg-pink d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-purple" title="紫色" 
          class="btn btn-sm palette bg-purple d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-red" title="红色" 
          class="btn btn-sm palette bg-red d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-teal" title="蓝绿色" 
          class="btn btn-sm palette bg-teal d-flex align-items-center justify-content-center">
        </button><button type="button" id="palette-yellow" title="黄色" 
          class="btn btn-sm palette bg-yellow d-flex align-items-center justify-content-center">
        </button></button>
    </div>
  </div>
</section></div>
</div></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><nav class="row" aria-label="breadcrumb">
  <ol class="breadcrumb surface"><li class="breadcrumb-item"><a href="/">主页</a></li><li class="breadcrumb-item"><a href="/posts/">文章</a></li><li class="breadcrumb-item"><a href="/posts/linux/">linux</a></li><li class="breadcrumb-item active">shell</li></ol>
</nav><article class="post row surface"><div class="post-toolbox">
  <div class="col-12 d-none d-lg-block">
    <a id="sidebarToggler" class="fas fa-fw fa-2x fa-expand-alt" role="button"></a>
  </div>
</div>
<h1 class="post-title my-3">shell</h1><div class="post-meta mb-3">
  <span class="post-date me-2">
    <i class="fas fa-fw fa-calendar-alt"></i>2021-07-19
  </span>
  <span class="post-reading-time me-2">
    <i class="fas fa-fw fa-coffee"></i>5 分钟阅读
  </span>
<a href="/categories/linux/" class="post-taxonomy">#linux</a><a href="/series/linux/" class="post-taxonomy">#linux</a><a href="/tags/linux/" class="post-taxonomy">#linux</a><a href="/tags/ubuntu/" class="post-taxonomy">#ubuntu</a></div>
<div class="post-share mb-3"><div class="addthis_inline_share_toolbox"></div></div><a id="btnTOC" class="fas fa-fw fa-2x fa-list-alt position-fixed" data-bs-toggle="offcanvas" href="#offcanvasTOC" aria-controls="offcanvasTOC" role="button">
</a>

<div class="offcanvas offcanvas-end surface" tabindex="-1" id="offcanvasTOC" aria-labelledby="offcanvasTOCLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasTOCLabel">目录</h5>
    <a role="button" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fas fa-2x fa-fw fa-times"></span>
    </a>
  </div>
  <div class="offcanvas-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#11-更新系统">1.1 更新系统</a></li>
    <li><a href="#12-修改ip">1.2 修改ip</a></li>
    <li><a href="#13-修改hostname">1.3 修改hostname</a></li>
    <li><a href="#14-安装docker">1.4 安装docker</a></li>
    <li><a href="#15-安装kubelet-kubeadm-kubectl">1.5 安装kubelet kubeadm kubectl</a></li>
    <li><a href="#16--安装集群">1.6  安装集群</a>
      <ul>
        <li><a href="#161-创建集群安装配置文件kubeadm-configyamlmaster节点">1.6.1 创建集群安装配置文件kubeadm-config.yaml（master节点）</a></li>
        <li><a href="#162-node节点加入到集群node节点">1.6.2 node节点加入到集群（node节点）</a></li>
        <li><a href="#163--组建集群的token过期处理">1.6.3  组建集群的token过期处理</a></li>
        <li><a href="#164--安装网络组建calico">1.6.4  安装网络组建calico</a></li>
        <li><a href="#164--coredns安装失败">1.6.4  coredns安装失败</a></li>
        <li><a href="#165-k8s命令自动补全">1.6.5 k8s命令自动补全</a></li>
      </ul>
    </li>
    <li><a href="#17-mertics-server">1.7 mertics-server</a></li>
    <li><a href="#18-dashboard">1.8 dashboard</a></li>
  </ul>
</nav>
  </div>
</div><div class="post-content mb-3"><h1 id="1安装后配置">1.安装后配置</h1>
<h2 id="11-更新系统">1.1 更新系统</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 列出可更新软件列表</span>
sudo apt update
<span style="color:#75715e"># 更新软件</span>
sudo apt upgrade
<span style="color:#75715e"># 清除旧的组件</span>
sudo apt autoremove
<span style="color:#75715e">#更新系统版本</span>
sudo apt-get dist-upgrade
</code></pre></div><h2 id="12-修改ip">1.2 修改ip</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">sudo vi /etc/netplan/00-installer-config.yaml
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">network</span>:
  <span style="color:#f92672">ethernets</span>:
    <span style="color:#f92672">enp0s3</span>:
      <span style="color:#f92672">dhcp4</span>: <span style="color:#66d9ef">no</span>
      <span style="color:#f92672">addresses</span>: [<span style="color:#ae81ff">192.168.124.200</span><span style="color:#ae81ff">/24]</span>
      <span style="color:#f92672">optional</span>: <span style="color:#66d9ef">true</span>
      <span style="color:#f92672">gateway4</span>: <span style="color:#ae81ff">192.168.124.1</span>
      <span style="color:#f92672">nameservers</span>:
       <span style="color:#f92672">addresses</span>: [<span style="color:#ae81ff">223.5.5.5</span>,<span style="color:#ae81ff">223.6.6.6</span>]
  <span style="color:#f92672">version</span>: <span style="color:#ae81ff">2</span>

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">sudo netplan apply
</code></pre></div><h2 id="13-修改hostname">1.3 修改hostname</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">vim  /etc/cloud/cloud.cfg
<span style="color:#75715e"># 修改  preserve_hostname: true</span>
sudo hostnamectl set-hostname master
sudo reboot
</code></pre></div><h2 id="14-安装docker">1.4 安装docker</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">##文档路径 https://docs.docker.com/engine/install/ubuntu/</span>
<span style="color:#75715e"># 1.安装依赖工具</span>
sudo apt-get install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    apt-transport-https <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    ca-certificates <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    gnupg <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    lsb-release
  <span style="color:#75715e"># 2.安装 Docker’s official GPG key  </span>
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
<span style="color:#75715e"># 3.设置标准仓库</span>
echo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
</span><span style="color:#e6db74">  </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
  <span style="color:#75715e"># 4.安装</span>
 sudo apt-get update
 sudo apt-get install docker-ce docker-ce-cli containerd.io
 
  <span style="color:#75715e"># 指定安装版本（可选）</span>
 <span style="color:#75715e"># apt-cache madison docker-ce</span>
 <span style="color:#75715e"># sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</span>

<span style="color:#75715e">#5.查看docker信息</span>
 sudo docker info
 
 <span style="color:#75715e">#6. 配置docker</span>
 
 sudo mkdir /etc/docker
cat <span style="color:#e6db74">&lt;&lt;EOF | sudo tee /etc/docker/daemon.json
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">  &#34;registry-mirrors&#34;:[&#34;https://5m8lizc8.mirror.aliyuncs.com&#34;],
</span><span style="color:#e6db74">  &#34;exec-opts&#34;: [&#34;native.cgroupdriver=systemd&#34;],
</span><span style="color:#e6db74">  &#34;log-driver&#34;: &#34;json-file&#34;,
</span><span style="color:#e6db74">  &#34;log-opts&#34;: {
</span><span style="color:#e6db74">    &#34;max-size&#34;: &#34;100m&#34;
</span><span style="color:#e6db74">  },
</span><span style="color:#e6db74">  &#34;storage-driver&#34;: &#34;overlay2&#34;
</span><span style="color:#e6db74">}
</span><span style="color:#e6db74">EOF</span>
 
sudo systemctl enable docker
sudo systemctl daemon-reload
sudo systemctl restart docker

<span style="color:#75715e">#7.解决docker info 报错WARNING: No swap limit support</span>
vim /etc/default/grub
<span style="color:#75715e">#GRUB_CMDLINE_LINUX=配置项，原有的内容切记不要删除，在双引号内添加cgroup_enable=memory swapaccount=1</span>
update-grub
reboot
</code></pre></div><h2 id="15-安装kubelet-kubeadm-kubectl">1.5 安装kubelet kubeadm kubectl</h2>
<ol>
<li>
<p>更新 <code>apt</code> 包索引并安装使用 Kubernetes <code>apt</code> 仓库所需要的包：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">sudo apt-get update
sudo apt-get install -y apt-transport-https ca-certificates curl
</code></pre></div></li>
<li>
<p>下载 Google Cloud 公开签名秘钥：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - 
</code></pre></div></li>
<li>
<p>添加 Kubernetes <code>apt</code> 仓库：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">cat <span style="color:#e6db74">&lt;&lt;EOF &gt;/etc/apt/sources.list.d/kubernetes.list
</span><span style="color:#e6db74">deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main
</span><span style="color:#e6db74">EOF</span>
</code></pre></div></li>
<li>
<p>更新 <code>apt</code> 包索引，安装 kubelet、kubeadm 和 kubectl，并锁定其版本：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">sudo apt-get update
<span style="color:#75715e">#列出所有的版本</span>
sudo apt-cache  madison   kubeadm
sudo apt-get install -y kubelet<span style="color:#f92672">=</span>1.21.4-00 kubeadm<span style="color:#f92672">=</span>1.21.4-00 kubectl<span style="color:#f92672">=</span>1.21.4-00
<span style="color:#75715e">##sudo apt-mark hold kubelet kubeadm kubectl</span>
systemctl daemon-reload
systemctl enable kubelet 
systemctl start kubelet
</code></pre></div></li>
</ol>
<h2 id="16--安装集群">1.6  安装集群</h2>
<h3 id="161-创建集群安装配置文件kubeadm-configyamlmaster节点">1.6.1 创建集群安装配置文件kubeadm-config.yaml（master节点）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#通过如下指令创建默认的kubeadm-config.yaml文件</span>
kubeadm config print init-defaults  &gt; kubeadm-config.yaml
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#默认文件如下</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kubeadm.k8s.io/v1beta2</span>
<span style="color:#f92672">bootstrapTokens</span>:
- <span style="color:#f92672">groups</span>:
  - <span style="color:#ae81ff">system:bootstrappers:kubeadm:default-node-token</span>
  <span style="color:#f92672">token</span>: <span style="color:#ae81ff">abcdef.0123456789abcdef</span>
  <span style="color:#f92672">ttl</span>: <span style="color:#ae81ff">24h0m0s</span>
  <span style="color:#f92672">usages</span>:
  - <span style="color:#ae81ff">signing</span>
  - <span style="color:#ae81ff">authentication</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">InitConfiguration</span>
<span style="color:#f92672">localAPIEndpoint</span>:
  <span style="color:#f92672">advertiseAddress</span>: <span style="color:#ae81ff">1.2.3.4</span>
  <span style="color:#f92672">bindPort</span>: <span style="color:#ae81ff">6443</span>
<span style="color:#f92672">nodeRegistration</span>:
  <span style="color:#f92672">criSocket</span>: <span style="color:#ae81ff">/var/run/dockershim.sock</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">node</span>
  <span style="color:#f92672">taints</span>: <span style="color:#66d9ef">null</span>
---
<span style="color:#f92672">apiServer</span>:
  <span style="color:#f92672">timeoutForControlPlane</span>: <span style="color:#ae81ff">4m0s</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kubeadm.k8s.io/v1beta2</span>
<span style="color:#f92672">certificatesDir</span>: <span style="color:#ae81ff">/etc/kubernetes/pki</span>
<span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">kubernetes</span>
<span style="color:#f92672">controllerManager</span>: {}
<span style="color:#f92672">dns</span>:
  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">CoreDNS</span>
<span style="color:#f92672">etcd</span>:
  <span style="color:#f92672">local</span>:
    <span style="color:#f92672">dataDir</span>: <span style="color:#ae81ff">/var/lib/etcd</span>
<span style="color:#f92672">imageRepository</span>: <span style="color:#ae81ff">k8s.gcr.io</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterConfiguration</span>
<span style="color:#f92672">kubernetesVersion</span>: <span style="color:#ae81ff">1.21.0</span>
<span style="color:#f92672">networking</span>:
  <span style="color:#f92672">dnsDomain</span>: <span style="color:#ae81ff">cluster.local</span>
  <span style="color:#f92672">serviceSubnet</span>: <span style="color:#ae81ff">10.96.0.0</span><span style="color:#ae81ff">/12</span>
<span style="color:#f92672">scheduler</span>: {}

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e">#修改后如下</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kubeadm.k8s.io/v1beta2</span>
<span style="color:#f92672">bootstrapTokens</span>:
- <span style="color:#f92672">groups</span>:
  - <span style="color:#ae81ff">system:bootstrappers:kubeadm:default-node-token</span>
  <span style="color:#f92672">token</span>: <span style="color:#ae81ff">abcdef.0123456789abcdef</span>
  <span style="color:#f92672">ttl</span>: <span style="color:#ae81ff">24h0m0s</span> <span style="color:#75715e">#加入集群token的过期时间</span>
  <span style="color:#f92672">usages</span>:
  - <span style="color:#ae81ff">signing</span>
  - <span style="color:#ae81ff">authentication</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">InitConfiguration</span>
<span style="color:#f92672">localAPIEndpoint</span>:
  <span style="color:#f92672">advertiseAddress</span>: <span style="color:#ae81ff">192.168.124.200</span> <span style="color:#75715e">#本机的ip，主节点的ip</span>
  <span style="color:#f92672">bindPort</span>: <span style="color:#ae81ff">6443</span>
<span style="color:#f92672">nodeRegistration</span>:
  <span style="color:#f92672">criSocket</span>: <span style="color:#ae81ff">/var/run/dockershim.sock</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">master</span> <span style="color:#75715e">#主机名</span>
  <span style="color:#f92672">taints</span>: <span style="color:#75715e">#添加污点，master节点不部署容器</span>
  - <span style="color:#f92672">effect</span>: <span style="color:#ae81ff">NoSchedule</span>
    <span style="color:#f92672">key</span>: <span style="color:#ae81ff">node-role.kubernetes.io/master</span>
---
<span style="color:#f92672">apiServer</span>:
  <span style="color:#f92672">timeoutForControlPlane</span>: <span style="color:#ae81ff">4m0s</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kubeadm.k8s.io/v1beta2</span>
<span style="color:#f92672">certificatesDir</span>: <span style="color:#ae81ff">/etc/kubernetes/pki</span>
<span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">kubernetes</span>
<span style="color:#f92672">controlPlaneEndpoint</span>: <span style="color:#e6db74">&#34;192.168.124.200:6443&#34;</span>    <span style="color:#75715e"># 主节点的地址，高可用的时候为虚拟IP和haproxy端口</span>
<span style="color:#f92672">controllerManager</span>: {}
<span style="color:#f92672">dns</span>:
  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">CoreDNS</span>
<span style="color:#f92672">etcd</span>:
  <span style="color:#f92672">local</span>:
    <span style="color:#f92672">dataDir</span>: <span style="color:#ae81ff">/var/lib/etcd</span>
<span style="color:#f92672">imageRepository</span>: <span style="color:#ae81ff">registry.aliyuncs.com/google_containers</span> <span style="color:#75715e">#替换为阿里云镜像</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterConfiguration</span>
<span style="color:#f92672">kubernetesVersion</span>: <span style="color:#ae81ff">1.21.0</span>
<span style="color:#f92672">networking</span>:
  <span style="color:#f92672">dnsDomain</span>: <span style="color:#ae81ff">cluster.local</span>
  <span style="color:#f92672">serviceSubnet</span>: <span style="color:#ae81ff">10.96.0.0</span><span style="color:#ae81ff">/12</span> <span style="color:#75715e">#service的网段</span>
  <span style="color:#f92672">podSubnet</span>: <span style="color:#ae81ff">172.168.0.0</span><span style="color:#ae81ff">/12</span> <span style="color:#75715e">#pod的网段</span>
<span style="color:#f92672">scheduler</span>: {}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#配置文件的版本和kubeadm版本不一致时可以使用</span>
kubeadm config migrate --old-config kubeadm-config.yaml --new-config kubeadm-config-new.yaml

<span style="color:#75715e"># 查看需要拉取的镜像</span>
kubeadm config images list --config kubeadm-config.yaml
<span style="color:#75715e"># 手动提前拉取要拉取的镜像，这步可以不操作，kubeadm init 时会自动拉取</span>
kubeadm config images pull --config kubeadm-config.yaml

<span style="color:#75715e">#安装集群</span>
kubeadm init --config kubeadm-config.yaml --upload-certs 

<span style="color:#75715e"># 如果出错了，可以重置集群 kubeadm reset</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">## 初始化成功的提示信息</span>
Your Kubernetes control-plane has initialized successfully!
<span style="color:#75715e">## 普通用户管理集群，需要拷贝 /etc/kubernetes/admin.con 到.kube/config</span>
To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown <span style="color:#66d9ef">$(</span>id -u<span style="color:#66d9ef">)</span>:<span style="color:#66d9ef">$(</span>id -g<span style="color:#66d9ef">)</span> $HOME/.kube/config
<span style="color:#75715e">## root管理集群，只需要配置环境变量即可</span>
Alternatively, <span style="color:#66d9ef">if</span> you are the root user, you can run:

  export KUBECONFIG<span style="color:#f92672">=</span>/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run <span style="color:#e6db74">&#34;kubectl apply -f [podnetwork].yaml&#34;</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of the control-plane node running the following command on each as root:
<span style="color:#75715e"># 主节点加入到集群中的命令，--control-plane 只有主节点才会有</span>
  kubeadm join 192.168.124.200:6443 --token abcdef.0123456789abcdef <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--discovery-token-ca-cert-hash sha256:7a3bec57076a1dd4b7f9c3f7b5acebab29f669e6dc9dc94bc3e0b489e504915c <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--control-plane --certificate-key b127516b8d4c04890a84f600549d117a5d7b606e4b092c9869ad248ca0aa41cb

Please note that the certificate-key gives access to cluster sensitive data, keep it secret!
As a safeguard, uploaded-certs will be deleted in two hours; If necessary, you can use
<span style="color:#e6db74">&#34;kubeadm init phase upload-certs --upload-certs&#34;</span> to reload certs afterward.

Then you can join any number of worker nodes by running the following on each as root:
<span style="color:#75715e"># node节点加入到集群中的命令，</span>
kubeadm join 192.168.124.200:6443 --token abcdef.0123456789abcdef <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--discovery-token-ca-cert-hash sha256:7a3bec57076a1dd4b7f9c3f7b5acebab29f669e6dc9dc94bc3e0b489e504915c 

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#admin.conf 保存的是集群的信息，kubectl 操作过去集群信息，就是通过这个文件</span>
cat <span style="color:#e6db74">&lt;&lt;EOF &gt;&gt; ~/.bashrc
</span><span style="color:#e6db74">export KUBECONFIG=/etc/kubernetes/admin.conf
</span><span style="color:#e6db74">EOF</span>
source ~/.bashrc

root@master:~# kubectl get node
NAME     STATUS     ROLES                  AGE     VERSION
master   NotReady   control-plane,master   9m56s   v1.21.4

root@master:~# kubectl get pod -A -o wide
NAMESPACE     NAME                             READY   STATUS    RESTARTS   AGE   IP                NODE     NOMINATED NODE   READINESS GATES
kube-system   coredns-59d64cd4d4-7x2zl         0/1     Pending   <span style="color:#ae81ff">0</span>          12m   &lt;none&gt;            &lt;none&gt;   &lt;none&gt;           &lt;none&gt;
kube-system   coredns-59d64cd4d4-cbdk6         0/1     Pending   <span style="color:#ae81ff">0</span>          12m   &lt;none&gt;            &lt;none&gt;   &lt;none&gt;           &lt;none&gt;
kube-system   etcd-master                      1/1     Running   <span style="color:#ae81ff">0</span>          12m   192.168.124.200   master   &lt;none&gt;           &lt;none&gt;
kube-system   kube-apiserver-master            1/1     Running   <span style="color:#ae81ff">0</span>          12m   192.168.124.200   master   &lt;none&gt;           &lt;none&gt;
kube-system   kube-controller-manager-master   1/1     Running   <span style="color:#ae81ff">0</span>          12m   192.168.124.200   master   &lt;none&gt;           &lt;none&gt;
kube-system   kube-proxy-72zjr                 1/1     Running   <span style="color:#ae81ff">0</span>          12m   192.168.124.200   master   &lt;none&gt;           &lt;none&gt;
kube-system   kube-scheduler-master            1/1     Running   <span style="color:#ae81ff">0</span>          12m   192.168.124.200   master   &lt;none&gt;           &lt;none&gt;

<span style="color:#75715e">#coredns 的STATUS为Pending，是因为网络组建没有装，装了网络组件后，状态变为正常</span>
</code></pre></div><h3 id="162-node节点加入到集群node节点">1.6.2 node节点加入到集群（node节点）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">kubeadm join 192.168.124.200:6443 --token abcdef.0123456789abcdef <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	--discovery-token-ca-cert-hash sha256:7a3bec57076a1dd4b7f9c3f7b5acebab29f669e6dc9dc94bc3e0b489e504915c 
</code></pre></div><h3 id="163--组建集群的token过期处理">1.6.3  组建集群的token过期处理</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 生成node节点加入集群的token</span>
root@master:~# kubeadm token create --print-join-command
kubeadm join 192.168.124.200:6443 --token 6vtaym.uus1ojfhejme92c7 --discovery-token-ca-cert-hash sha256:7a3bec57076a1dd4b7f9c3f7b5acebab29f669e6dc9dc94bc3e0b489e504915c 

<span style="color:#75715e">#生成master节点加入的token，master节点比node节点多了个--control-plane的key</span>
root@master:~# kubeadm init phase  upload-certs --upload-certs
I0819 01:03:18.692929   <span style="color:#ae81ff">28537</span> version.go:254<span style="color:#f92672">]</span> remote version is much newer: v1.22.0; falling back to: stable-1.21
<span style="color:#f92672">[</span>upload-certs<span style="color:#f92672">]</span> Storing the certificates in Secret <span style="color:#e6db74">&#34;kubeadm-certs&#34;</span> in the <span style="color:#e6db74">&#34;kube-system&#34;</span> Namespace
<span style="color:#f92672">[</span>upload-certs<span style="color:#f92672">]</span> Using certificate key:
8d8911281338fd20979a7bf4be9c103dd1499404afad592718efad837a8d9ac9

<span style="color:#75715e">#组建主节点的加入命令</span>
kubeadm join 192.168.124.200:6443 --token 6vtaym.uus1ojfhejme92c7 --discovery-token-ca-cert-hash sha256:7a3bec57076a1dd4b7f9c3f7b5acebab29f669e6dc9dc94bc3e0b489e504915c --control-plane --certificate-key 8d8911281338fd20979a7bf4be9c103dd1499404afad592718efad837a8d9ac9
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#其他命令</span>
<span style="color:#75715e">#查看所有的sectet</span>
kubectl get secret -A
<span style="color:#75715e">#输出密钥信息</span>
kubectl get secret -n kube-system  bootstrap-token-6vtaym  -oyaml<span style="color:#f92672">=</span>
</code></pre></div><h3 id="164--安装网络组建calico">1.6.4  安装网络组建calico</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e">##文档位置</span>
<span style="color:#75715e"># https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises</span>
<span style="color:#75715e"># 安装calico</span>
curl https://docs.projectcalico.org/manifests/calico-etcd.yaml -o calico.yaml


</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"> <span style="color:#75715e">#取消下面两行的注释，并将192.168.0.0/16 替换为kubeadm-config.yaml中的podSubnet 172.168.0.0/12</span>
 - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">CALICO_IPV4POOL_CIDR</span>
   <span style="color:#f92672">value</span>: <span style="color:#e6db74">&#34;172.168.0.0/12&#34;</span> 

<span style="color:#75715e">#修改etcd的地址</span>
<span style="color:#75715e">#etcd_endpoints: &#34;http://&lt;ETCD_IP&gt;:&lt;ETCD_PORT&gt;&#34;</span>
<span style="color:#f92672">etcd_endpoints</span>: <span style="color:#e6db74">&#34;https://192.168.124.200:2379&#34;</span>
<span style="color:#75715e">#etcd的证书配置</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">data</span>:
  <span style="color:#75715e"># Configure this with the location of your etcd cluster.</span>
  <span style="color:#75715e">#etcd_endpoints: &#34;http://&lt;ETCD_IP&gt;:&lt;ETCD_PORT&gt;&#34;</span>
  <span style="color:#f92672">etcd_endpoints</span>: <span style="color:#e6db74">&#34;https://192.168.124.200:2379&#34;</span> <span style="color:#75715e">#etcd的地址，要使用https</span>
  <span style="color:#75715e"># If you&#39;re using TLS enabled etcd uncomment the following.</span>
  <span style="color:#75715e"># You must also populate the Secret below with these files.</span>
  <span style="color:#f92672">etcd_ca</span>: <span style="color:#e6db74">&#34;/calico-secrets/etcd-ca&#34;</span>  <span style="color:#75715e">#打开注释</span>
  <span style="color:#f92672">etcd_cert</span>: <span style="color:#e6db74">&#34;/calico-secrets/etcd-cert&#34;</span> <span style="color:#75715e">#打开注释</span>
  <span style="color:#f92672">etcd_key</span>: <span style="color:#e6db74">&#34;/calico-secrets/etcd-key&#34;</span> <span style="color:#75715e">#打开注释</span>

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># 使用命令 替换密钥 cat &lt;file&gt; | base64 -w 0</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
<span style="color:#f92672">type</span>: <span style="color:#ae81ff">Opaque</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">calico-etcd-secrets</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">kube-system</span>
<span style="color:#f92672">data</span>:
  <span style="color:#75715e"># Populate the following with etcd TLS configuration if desired, but leave blank if</span>
  <span style="color:#75715e"># not using TLS for etcd.</span>
  <span style="color:#75715e"># The keys below should be uncommented and the values populated with the base64</span>
  <span style="color:#75715e"># encoded contents of each file that would be associated with the TLS data.</span>
  <span style="color:#75715e"># Example command for encoding a file contents: cat &lt;file&gt; | base64 -w 0</span>
  <span style="color:#f92672">etcd-key</span>: <span style="color:#ae81ff">LS0tLS1CRUdJT...VORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=</span> <span style="color:#75715e">#/etc/kubernetes/pki/etcd/server.key</span>
  <span style="color:#f92672">etcd-cert</span>: <span style="color:#ae81ff">LS0tLS1CRUdJTiBDRVJU...LS0tCg==</span> <span style="color:#75715e">#/etc/kubernetes/pki/etcd/server.crt</span>
  <span style="color:#f92672">etcd-ca</span>: <span style="color:#ae81ff">LS0tLS1CRUdJ...tLS0tLQo=</span> <span style="color:#75715e">#/etc/kubernetes/pki/etcd/ca.crt</span>

</code></pre></div><h3 id="164--coredns安装失败">1.6.4  coredns安装失败</h3>
<p>calico安装后，coredns镜像拉取失败</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 查看错误信息</span>
kubectl describe pod  coredns-59d64cd4d4-n46p6  -n kube-system
<span style="color:#75715e"># 手动拉取镜像地址，每个node节点都要执行 然后改名</span>
docker pull registry.aliyuncs.com/google_containers/coredns:1.8.0
docker tag  registry.aliyuncs.com/google_containers/coredns:1.8.0  registry.aliyuncs.com/google_containers/coredns:v1.8.0

<span style="color:#75715e"># 删除错误的pod，k8s会自动重启pod，拉取镜像</span>
kubectl delete pod coredns-59d64cd4d4-n46p6  -n kube-system
</code></pre></div><h3 id="165-k8s命令自动补全">1.6.5 k8s命令自动补全</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#34;source &lt;(kubectl completion bash)&#34;</span> &gt;&gt; ~/.bashrc <span style="color:#75715e"># 在您的 bash shell 中永久的添加自动补全</span>
</code></pre></div><h2 id="17-mertics-server">1.7 mertics-server</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-shell" data-lang="shell">wget   https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml 

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">template</span>:
    <span style="color:#f92672">metadata</span>:
      <span style="color:#f92672">labels</span>:
        <span style="color:#f92672">k8s-app</span>: <span style="color:#ae81ff">metrics-server</span>
    <span style="color:#f92672">spec</span>:
      <span style="color:#f92672">containers</span>:
      - <span style="color:#f92672">args</span>:
        - --<span style="color:#ae81ff">cert-dir=/tmp</span>
        - --<span style="color:#ae81ff">secure-port=443</span>
        - --<span style="color:#ae81ff">kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span>
        - --<span style="color:#ae81ff">requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt</span> <span style="color:#75715e"># 添加证书，可能会导致获取不到度量指标</span>
        - --<span style="color:#ae81ff">kubelet-use-node-status-port</span>
        - --<span style="color:#ae81ff">metric-resolution=15s</span>
        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">k8s.gcr.io/metrics-server/metrics-server:v0.5.0</span>

</code></pre></div><h2 id="18-dashboard">1.8 dashboard</h2>
</div><div class="post-copyright mb-4">
  <h3>版权</h3><div class="post-cc">本作品采用 <a target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">CC BY-NC-ND 4.0 <i class="fab fa-fw fa-creative-commons"></i><i class="fab fa-fw fa-creative-commons-by"></i><i class="fab fa-fw fa-creative-commons-nc"></i><i class="fab fa-fw fa-creative-commons-nd"></i></a> 授权。</div>
</div><hr /><div class="post-navs d-flex mb-3 justify-content-between">
  <div class="post-nav w-50"><div class="prev-post btn btn-sm">
      <a href="/posts/tool/proxy/">代理</a>
    </div></div>
  <div class="post-nav flex-row-reverse"><div class="next-post btn btn-sm">
      <a href="/posts/linux/shell/">shell</a>
    </div></div>
</div><section class="related-posts">
    <h3>相关文章</h3>
    <ul class="related-posts"><li><a href="/posts/docker/base/">docker</a></li><li><a href="/posts/docker/env/">docker</a></li><li><a href="/posts/linux/shell/">shell</a></li><li><a href="/posts/docker/dockerfile/">docker</a></li><li><a href="/posts/k8s/base/">docker</a></li></ul>
  </section></article><div class="post-comments surface row"><script src="https://utteranc.es/client.js"
  repo="razonyang/hugo-theme-bootstrap"
  issue-term="pathname"
  label=""
  theme="github-dark"
  crossorigin="anonymous"
  async>
</script></div></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container"><section class="profile surface row">
  <div class="col-xl-6 d-flex align-items-center justify-content-center">
    <img class="profile-avatar img-fluid" src="/images/profile.webp" alt="Razon Yang" loading="lazy">
  </div>
  <div class="col-xl-6">
    <h5 class="profile-name my-2">Razon Yang</h5><div class="profile-bio mb-2">Gopher, PHPer, Full Stack Engineer.</div><div class="profile-company mb-2"><i class="fas fa-fw fa-building"></i>Null</div><div class="profile-location mb-2"><i class="fas fa-fw fa-map-marker-alt"></i>Earth</div></div>
</section><section class="recent-posts row surface">
  <h4>最近文章</h4>
  <ul><li><a href="/posts/docker/base/">docker</a></li><li><a href="/posts/docker/dockerfile/">docker</a></li><li><a href="/posts/docker/env/">docker</a></li><li><a href="/posts/k8s/base/">docker</a></li><li><a href="/posts/tool/hugo/">hugo</a></li></ul>
</section><section class="taxonomy-categories row surface">
      <h4>
        <a href="/categories">分类</a>
      </h4>
      <div><a href="/categories/shortcode/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="Shortcode">
          Shortcode <span class="badge rounded-pill">9</span>
        </a><a href="/categories/linux/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="linux">
          linux <span class="badge rounded-pill">5</span>
        </a><a href="/categories/k8s/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="k8s">
          k8s <span class="badge rounded-pill">2</span>
        </a><a href="/categories/tool/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="tool">
          tool <span class="badge rounded-pill">2</span>
        </a></div>
    </section><section class="taxonomy-series row surface">
      <h4>
        <a href="/series">专栏</a>
      </h4>
      <div><a href="/series/docker/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="docker">
          docker <span class="badge rounded-pill">3</span>
        </a><a href="/series/k8s/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="k8s">
          k8s <span class="badge rounded-pill">2</span>
        </a><a href="/series/linux/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="linux">
          linux <span class="badge rounded-pill">2</span>
        </a><a href="/series/tool/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="tool">
          tool <span class="badge rounded-pill">2</span>
        </a><a href="/series/%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="用户手册">
          用户手册 <span class="badge rounded-pill">1</span>
        </a></div>
    </section><section class="taxonomy-tags row surface">
      <h4>
        <a href="/tags">标签</a>
      </h4>
      <div><a href="/tags/linux/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="linux">
          linux <span class="badge rounded-pill">4</span>
        </a><a href="/tags/docker/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="docker">
          docker <span class="badge rounded-pill">3</span>
        </a><a href="/tags/k8s/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="k8s">
          k8s <span class="badge rounded-pill">2</span>
        </a><a href="/tags/alert/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="Alert">
          Alert <span class="badge rounded-pill">1</span>
        </a><a href="/tags/codepen/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="CodePen">
          CodePen <span class="badge rounded-pill">1</span>
        </a><a href="/tags/dockerfile/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="dockerfile">
          dockerfile <span class="badge rounded-pill">1</span>
        </a><a href="/tags/github/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="github">
          github <span class="badge rounded-pill">1</span>
        </a><a href="/tags/github-pages/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="github pages">
          github pages <span class="badge rounded-pill">1</span>
        </a><a href="/tags/hugo/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="hugo">
          hugo <span class="badge rounded-pill">1</span>
        </a><a href="/tags/jsfiddle/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="JSFiddle">
          JSFiddle <span class="badge rounded-pill">1</span>
        </a></div>
    </section></div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://space.bilibili.com/yourbilibiliuserid" title="bilibili">
        <i class="fa-fw fa-2x fas fa-tv"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://bitbucket.org/yourbitbucketworkspaceid" title="Bitbucket">
        <i class="fa-fw fa-2x fab fa-bitbucket"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://hub.docker.com/u/yourdockerhubusername" title="Docker Hub">
        <i class="fa-fw fa-2x fab fa-docker"></i>
      </a>
    </li><li class="nav-item">
    <a class="nav-link social-link" href="mailto:user@domain.tld" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a>
  </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://facebook.com/yourfacebookusername" title="Facebook">
        <i class="fa-fw fa-2x fab fa-facebook-f"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://github.com/yourgithubusername" title="GitHub">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://gitlab.com/yourgitlabusername" title="GitLab">
        <i class="fa-fw fa-2x fab fa-gitlab"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.instagram.com/yourinstagramusername" title="Instagram">
        <i class="fa-fw fa-2x fab fa-instagram"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.last.fm/user/yourlastfmusername" title="Last.fm">
        <i class="fa-fw fa-2x fab fa-lastfm"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://linkedin.com/yourlinkedinusername" title="LinkedIn">
        <i class="fa-fw fa-2x fab fa-linkedin-in"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://medium.com/@yourmediumusername" title="Medium">
        <i class="fab fa-fw fa-2x fa-medium-m"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=yourqqnumber&amp;site=qq&amp;menu=yes" title="QQ">
        <i class="fa-fw fa-2x fab fa-qq"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.quora.com/profile/yourquorausername" title="Quora">
        <i class="fa-fw fa-2x fab fa-quora"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.reddit.com/user/yourredditusername" title="Reddit">
        <i class="fa-fw fa-2x fab fa-reddit"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://stackoverflow.com/users/yourstackoverflowuserid" title="Stack Overflow">
        <i class="fa-fw fa-2x fab fa-stack-overflow"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://t.me/yourtelegramusername" title="Telegram">
        <i class="fa-fw fa-2x fab fa-telegram-plane"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://yourtumblrusername.tumblr.com" title="Tumblr">
        <i class="fa-fw fa-2x fab fa-tumblr"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://twitter.com/yourtwitterusername" title="Twitter">
        <i class="fa-fw fa-2x fab fa-twitter"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://weibo.com/yourweibousername" title="Weibo">
        <i class="fa-fw fa-2x fab fa-weibo"></i>
      </a>
    </li><li class="nav-item">
      <a class="nav-link social-link" target="_blank" href="https://www.zhihu.com/people/yourzhihuusername" title="Zhihu">
        <i class="fa-fw fa-2x fab fa-zhihu"></i>
      </a>
    </li></nav>
<div class="copyright mb-2">
  Copyright © 2016-2021 Razon Yang. All Rights Reserved.
</div>
<div class="powered-by mb-2">
  Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> and the <a href="https://github.com/razonyang/hugo-theme-bootstrap" target="_blank">Bootstrap</a> theme.
</div></footer>
<a id="btnScrollToTop" class="btn-scroll-to-top">
  <i class="fas fa-fw fa-chevron-circle-up fa-2x"></i>
</a>
<script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-60bcc43f59f2d04f"></script></body>
</html>
